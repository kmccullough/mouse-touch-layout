{"version":3,"sources":["../src/index.js"],"names":["UsingTouchLayout","classElement","document","body","eventElement","onTouchActive","onNonTouchActive","onChange","nonTouchActiveClass","touchActiveClass","navigator","maxTouchPoints","setClasses","onTouchActiveChange","pointerEvent","onPointerDown","e","pointerType","isTouchActive","addEventListener","cleanUps","push","removeEventListener","isDestroyed","add","remove","classList","hasNonTouchActiveClass","hasTouchActiveClass","forEach","c"],"mappings":"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","sourcesContent":["export class UsingTouchLayout {\n\n  isTouchActive = !!navigator?.maxTouchPoints;\n\n  nonTouchActiveClass = 'l-using-touch--non-touch';\n  touchActiveClass = 'l-using-touch--touch';\n\n  cleanUps = [];\n\n  classElement;\n  isDestroyed = false;\n\n  constructor({\n      classElement = document?.body,\n      eventElement = document,\n      onTouchActive = () => {},\n      onNonTouchActive = () => {},\n      onChange = () => {},\n      nonTouchActiveClass,\n      touchActiveClass,\n    } = {}\n  ) {\n    this.classElement = classElement;\n    this.setClasses(nonTouchActiveClass, touchActiveClass)\n      || this.onTouchActiveChange();\n    const pointerEvent = 'pointerdown';\n    const onPointerDown = e => {\n      if (e.pointerType === 'touch') {\n        if (!this.isTouchActive) {\n          this.isTouchActive = true;\n          this.onTouchActiveChange();\n          onTouchActive();\n          onChange(true);\n        }\n      } else if (this.isTouchActive) {\n        this.isTouchActive = false;\n        this.onTouchActiveChange();\n        onNonTouchActive();\n        onChange(false);\n      }\n    };\n    eventElement.addEventListener(pointerEvent, onPointerDown);\n    this.cleanUps.push(() => eventElement.removeEventListener(pointerEvent, onPointerDown));\n  }\n\n  onTouchActiveChange() {\n    if (this.isDestroyed) {\n      return;\n    }\n    let { isTouchActive, nonTouchActiveClass: add, touchActiveClass: remove } = this;\n    if (isTouchActive) {\n      [ add, remove ] = [ remove, add ];\n    }\n    const { classList } = this.classElement;\n    classList.remove(remove);\n    classList.add(add);\n  }\n\n  setClasses(nonTouchActiveClass = this.nonTouchActiveClass, touchActiveClass = this.touchActiveClass) {\n    if (this.isDestroyed) {\n      return false;\n    }\n    const hasNonTouchActiveClass = nonTouchActiveClass !== this.nonTouchActiveClass;\n    const hasTouchActiveClass = touchActiveClass !== this.touchActiveClass;\n    if (!(hasNonTouchActiveClass || hasTouchActiveClass)) {\n      return false;\n    }\n    const { classList } = this.classElement;\n    if (hasNonTouchActiveClass) {\n      classList.remove(this.nonTouchActiveClass);\n      this.nonTouchActiveClass = nonTouchActiveClass;\n    }\n    if (hasTouchActiveClass) {\n      classList.remove(this.touchActiveClass);\n      this.touchActiveClass = touchActiveClass;\n    }\n    this.onTouchActiveChange();\n    return true;\n  }\n\n  destroy() {\n    if (this.isDestroyed) {\n      return;\n    }\n    this.cleanUps.forEach(c => c());\n    this.isDestroyed = true;\n  }\n\n}\n"],"file":"index.js"}